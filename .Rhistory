# win losses live
favorite_win_prob %>%
mutate(win1=score1 > score2,
win2=score2 > score1,
team_win1=paste(team1, win1, sep = "_"),
team_win2=paste(team2, win2, sep = "_")) %>%
gather(one_two, team_win, team_win1, team_win2) %>%
separate(team_win, into = c("team", "win"), sep = "_")
# win losses live
favorite_win_prob %>%
mutate(win1=score1 > score2,
win2=score2 > score1,
team_win1=paste(team1, win1, sep = "_"),
team_win2=paste(team2, win2, sep = "_")) %>%
gather(one_two, team_win, team_win1, team_win2) %>%
separate(team_win, into = c("team", "win"), sep = "_", convert = TRUE)
# win losses live
favorite_win_prob %>%
mutate(win1=score1 > score2,
win2=score2 > score1,
team_win1=paste(team1, win1, sep = "_"),
team_win2=paste(team2, win2, sep = "_")) %>%
gather(one_two, team_win, team_win1, team_win2) %>%
separate(team_win, into = c("team", "win"), sep = "_", convert = TRUE) %>%
arrange(date)
# win losses live
favorite_win_prob %>%
mutate(win1=score1 > score2,
win2=score2 > score1,
team_win1=paste(team1, win1, sep = "_"),
team_win2=paste(team2, win2, sep = "_")) %>%
gather(one_two, team_win, team_win1, team_win2) %>%
separate(team_win, into = c("team", "win"), sep = "_", convert = TRUE) %>%
arrange(date) %>%
group_by(season, team) %>%
mutate(wins = cumsum(win),
losses = cumsum(!win),
average = wins / sum(df))
# win losses live
favorite_win_prob %>%
mutate(win1=score1 > score2,
win2=score2 > score1,
team_win1=paste(team1, win1, sep = "_"),
team_win2=paste(team2, win2, sep = "_")) %>%
gather(one_two, team_win, team_win1, team_win2) %>%
separate(team_win, into = c("team", "win"), sep = "_", convert = TRUE) %>%
arrange(date) %>%
group_by(season, team) %>%
mutate(wins = cumsum(win),
losses = cumsum(!win),
average = wins / (wins+losses))
# win losses live
favorite_win_prob %>%
mutate(win1=score1 > score2,
win2=score2 > score1,
team_win1=paste(team1, win1, sep = "_"),
team_win2=paste(team2, win2, sep = "_")) %>%
gather(one_two, team_win, team_win1, team_win2) %>%
separate(team_win, into = c("team", "win"), sep = "_", convert = TRUE) %>%
arrange(date) %>%
group_by(season, team) %>%
mutate(wins = cumsum(win),
losses = cumsum(!win),
average = wins / (wins+losses)) %>%
filter(team == POR, season == 2019)
# win losses live
favorite_win_prob %>%
mutate(win1=score1 > score2,
win2=score2 > score1,
team_win1=paste(team1, win1, sep = "_"),
team_win2=paste(team2, win2, sep = "_")) %>%
gather(one_two, team_win, team_win1, team_win2) %>%
separate(team_win, into = c("team", "win"), sep = "_", convert = TRUE) %>%
arrange(date) %>%
group_by(season, team) %>%
mutate(wins = cumsum(win),
losses = cumsum(!win),
average = wins / (wins+losses)) %>%
filter(team == 'POR', season == 2019)
# win losses live
favorite_win_prob %>%
mutate(win1=score1 > score2,
win2=score2 > score1,
team_win1=paste(team1, win1, sep = "_"),
team_win2=paste(team2, win2, sep = "_")) %>%
gather(one_two, team_win, team_win1, team_win2) %>%
separate(team_win, into = c("team", "win"), sep = "_", convert = TRUE) %>%
arrange(date) %>%
group_by(season, team) %>%
mutate(wins = cumsum(win),
losses = cumsum(!win),
average = wins / (wins+losses)) %>%
filter(team == 'POR', season == 2019) %>%
select(date, team1, team2, wins, losses, avg)
# win losses live
favorite_win_prob %>%
mutate(win1=score1 > score2,
win2=score2 > score1,
team_win1=paste(team1, win1, sep = "_"),
team_win2=paste(team2, win2, sep = "_")) %>%
gather(one_two, team_win, team_win1, team_win2) %>%
separate(team_win, into = c("team", "win"), sep = "_", convert = TRUE) %>%
arrange(date) %>%
group_by(season, team) %>%
mutate(wins = cumsum(win),
losses = cumsum(!win),
average = wins / (wins+losses)) %>%
filter(team == 'POR', season == 2019) %>%
select(date, team1, team2, wins, losses, average)
# win losses live
favorite_win_prob %>%
mutate(win1=score1 > score2,
win2=score2 > score1,
team_win1=paste(team1, win1, sep = "_"),
team_win2=paste(team2, win2, sep = "_")) %>%
gather(one_two, team_win, team_win1, team_win2) %>%
separate(team_win, into = c("team", "win"), sep = "_", convert = TRUE) %>%
arrange(date) %>%
group_by(season, team) %>%
mutate(wins = cumsum(win),
losses = cumsum(!win),
win_pct = wins / (wins+losses)) %>%
filter(team == 'POR', season == 2019) %>%
select(date, team1, team2, wins, losses, win_pct)
# win losses live
favorite_win_prob %>%
mutate(win1=score1 > score2,
win2=score2 > score1,
team_win1=paste(team1, win1, sep = "_"),
team_win2=paste(team2, win2, sep = "_")) %>%
gather(one_two, team_win, team_win1, team_win2) %>%
separate(team_win, into = c("team", "win"), sep = "_", convert = TRUE) %>%
arrange(date) %>%
group_by(season, team) %>%
mutate(wins = lag(cumsum(win)),
losses = lag(cumsum(!win)),
win_pct = wins / (wins+losses)) %>%
filter(team == 'POR', season == 2019) %>%
select(date, team1, team2, wins, losses, win_pct)
# win losses live
favorite_win_prob %>%
mutate(win1=score1 > score2,
win2=score2 > score1,
team_win1=paste(team1, win1, sep = "_"),
team_win2=paste(team2, win2, sep = "_")) %>%
gather(one_two, team_win, team_win1, team_win2) %>%
separate(team_win, into = c("team", "win"), sep = "_", convert = TRUE) %>%
arrange(date) %>%
group_by(season, team) %>%
mutate(wins = c(0, na.omit(lag(cumsum(win)))),
losses = c(0, na.omit(lag(cumsum(!win)))),
win_pct = wins / (wins+losses)) %>%
filter(team == 'POR', season == 2019) %>%
select(date, team1, team2, wins, losses, win_pct)
win_pct = c(0, na.omit(wins / (wins+losses))) %>%
# win losses live
favorite_win_prob %>%
mutate(win1=score1 > score2,
win2=score2 > score1,
team_win1=paste(team1, win1, sep = "_"),
team_win2=paste(team2, win2, sep = "_")) %>%
gather(one_two, team_win, team_win1, team_win2) %>%
separate(team_win, into = c("team", "win"), sep = "_", convert = TRUE) %>%
arrange(date) %>%
group_by(season, team) %>%
mutate(wins = c(0, na.omit(lag(cumsum(win))))),
losses = c(0, na.omit(lag(cumsum(!win)))),
win_pct = c(0, na.omit(wins / (wins+losses))) %>%
filter(team == 'POR', season == 2019) %>%
select(date, team1, team2, wins, losses, win_pct)
# win losses live
favorite_win_prob %>%
mutate(win1=score1 > score2,
win2=score2 > score1,
team_win1=paste(team1, win1, sep = "_"),
team_win2=paste(team2, win2, sep = "_")) %>%
gather(one_two, team_win, team_win1, team_win2) %>%
separate(team_win, into = c("team", "win"), sep = "_", convert = TRUE) %>%
arrange(date) %>%
group_by(season, team) %>%
mutate(wins = c(0, na.omit(lag(cumsum(win)))),
losses = c(0, na.omit(lag(cumsum(!win)))),
win_pct = c(0, na.omit(wins / (wins+losses)))) %>%
filter(team == 'POR', season == 2019) %>%
select(date, team1, team2, wins, losses, win_pct)
#win losses live
favorite_win_prob %>%
mutate(win1=score1 > score2,
win2=score2 > score1,
team_win1=paste(team1, win1, sep = "_"),
team_win2=paste(team2, win2, sep = "_")) %>%
gather(one_two, team_win, team_win1, team_win2) %>%
separate(team_win, into = c("team", "win"), sep = "_", convert = TRUE) %>%
arrange(date) %>%
group_by(season, team) %>%
#add a lag to reflect the win pct at beginning of day, before games. and add '0' placeholder at first poisiton
mutate(wins = c(0, na.omit(lag(cumsum(win)))),
losses = c(0, na.omit(lag(cumsum(!win)))),
win_pct = (wins / (wins+losses))) %>%
filter(team == 'POR', season == 2019) %>%
select(date, team1, team2, wins, losses, win_pct)
#win losses live
favorite_win_prob %>%
mutate(win1=score1 > score2,
win2=score2 > score1,
team_win1=paste(team1, win1, sep = "_"),
team_win2=paste(team2, win2, sep = "_")) %>%
gather(one_two, team_win, team_win1, team_win2) %>%
separate(team_win, into = c("team", "win"), sep = "_", convert = TRUE) %>%
arrange(date) %>%
group_by(season, team) %>%
#add a lag to reflect the win pct at beginning of day, before games. and add '0' placeholder at first poisiton
mutate(wins = na.omit(lag(cumsum(win))),
losses = na.omit(lag(cumsum(!win))),
win_pct = (wins / (wins+losses))) %>%
filter(team == 'POR', season == 2019) %>%
select(date, team1, team2, wins, losses, win_pct)
#win losses live
favorite_win_prob %>%
mutate(win1=score1 > score2,
win2=score2 > score1,
team_win1=paste(team1, win1, sep = "_"),
team_win2=paste(team2, win2, sep = "_")) %>%
gather(one_two, team_win, team_win1, team_win2) %>%
separate(team_win, into = c("team", "win"), sep = "_", convert = TRUE) %>%
arrange(date) %>%
group_by(season, team) %>%
#add a lag to reflect the win pct at beginning of day, before games. and add '0' placeholder at first poisiton
mutate(wins = c(0, na.omit(lag(cumsum(win)))),
losses = c(0, na.omit(lag(cumsum(!win)))),
win_pct = (wins / (wins+losses))) %>%
filter(team == 'POR', season == 2019) %>%
select(date, team1, team2, wins, losses, win_pct)
#win losses live
favorite_win_prob %>%
mutate(win1=score1 > score2,
win2=score2 > score1,
team_win1=paste(team1, win1, sep = "_"),
team_win2=paste(team2, win2, sep = "_")) %>%
gather(one_two, team_win, team_win1, team_win2) %>%
separate(team_win, into = c("team", "win"), sep = "_", convert = TRUE) %>%
arrange(date) %>%
group_by(season, team) %>%
#add a lag to reflect the win pct at beginning of day, before games. and add '0' placeholder at first poisiton
mutate(wins = c(0, na.omit(lag(cumsum(win)))),
losses = c(0, na.omit(lag(cumsum(!win)))),
win_pct = (wins / (wins+losses))) %>%
filter(team == 'POR', season == 2019) %>%
select(wins)
#win losses live
favorite_win_prob %>%
mutate(win1=score1 > score2,
win2=score2 > score1,
team_win1=paste(team1, win1, sep = "_"),
team_win2=paste(team2, win2, sep = "_")) %>%
gather(one_two, team_win, team_win1, team_win2) %>%
separate(team_win, into = c("team", "win"), sep = "_", convert = TRUE) %>%
arrange(date) %>%
group_by(season, team) %>%
#add a lag to reflect the win pct at beginning of day, before games. and add '0' placeholder at first poisiton
mutate(wins = c(0, na.omit(lag(cumsum(win)))),
losses = c(0, na.omit(lag(cumsum(!win)))),
win_pct = (wins / (wins+losses)))
#win losses live
favorite_win_prob %>%
mutate(win1=score1 > score2,
win2=score2 > score1,
team_win1=paste(team1, win1, sep = "_"),
team_win2=paste(team2, win2, sep = "_")) %>%
gather(one_two, team_win, team_win1, team_win2) %>%
separate(team_win, into = c("team", "win"), sep = "_", convert = TRUE) %>%
arrange(date) %>%
group_by(season, team) %>%
#add a lag to reflect the win pct at beginning of day, before games. and add '0' placeholder at first poisiton
mutate(wins = lag(cumsum(win))),
losses = lag(cumsum(!win))),
win_pct = (wins / (wins+losses))) %>%
filter(team == 'POR', season == 2019) %>%
select(wins)
#win losses live
favorite_win_prob %>%
mutate(win1=score1 > score2,
win2=score2 > score1,
team_win1=paste(team1, win1, sep = "_"),
team_win2=paste(team2, win2, sep = "_")) %>%
gather(one_two, team_win, team_win1, team_win2) %>%
separate(team_win, into = c("team", "win"), sep = "_", convert = TRUE) %>%
arrange(date) %>%
group_by(season, team) %>%
#add a lag to reflect the win pct at beginning of day, before games. and add '0' placeholder at first poisiton
mutate(wins = lag(cumsum(win)),
losses = lag(cumsum(!win)),
win_pct = (wins / (wins+losses))) %>%
filter(team == 'POR', season == 2019) %>%
select(team1, team2, wins, losses, win_pct)
#win losses live
favorite_win_prob %>%
mutate(win1=score1 > score2,
win2=score2 > score1,
team_win1=paste(team1, win1, sep = "_"),
team_win2=paste(team2, win2, sep = "_")) %>%
gather(one_two, team_win, team_win1, team_win2) %>%
separate(team_win, into = c("team", "win"), sep = "_", convert = TRUE) %>%
arrange(date) %>%
group_by(season, team) %>%
#add a lag to reflect the win pct at beginning of day, before games. and add '0' placeholder at first poisiton
mutate(wins = lag(cumsum(win)),
losses = lag(cumsum(!win)),
win_pct = (wins / (wins+losses))) %>%
filter(team == 'POR', season == 2019) %>%
select(team1, team2, wins, losses, win_pct) %>% tail()
#win losses live
favorite_win_prob %>%
mutate(win1=score1 > score2,
win2=score2 > score1,
team_win1=paste(team1, win1, sep = "_"),
team_win2=paste(team2, win2, sep = "_")) %>%
gather(one_two, team_win, team_win1, team_win2) %>%
separate(team_win, into = c("team", "win"), sep = "_", convert = TRUE) %>%
arrange(date) %>%
group_by(season, team) %>%
#add a lag to reflect the win pct at beginning of day, before games. and add '0' placeholder at first poisiton
mutate(wins = lag(cumsum(win)),
losses = lag(cumsum(!win)),
win_pct = (wins / (wins+losses))) %>%
filter(team == 'POR', season == 2019) %>%
select(date, team1, team2, wins, losses, win_pct) %>% tail()
?replace_na()
#win losses live
favorite_win_prob %>%
mutate(win1=score1 > score2,
win2=score2 > score1,
team_win1=paste(team1, win1, sep = "_"),
team_win2=paste(team2, win2, sep = "_")) %>%
gather(one_two, team_win, team_win1, team_win2) %>%
separate(team_win, into = c("team", "win"), sep = "_", convert = TRUE) %>%
arrange(date) %>%
group_by(season, team) %>%
#add a lag to reflect the win pct at beginning of day, before games. and add '0' placeholder at first poisiton
mutate(wins = lag(cumsum(win)),
losses = lag(cumsum(!win)),
win_pct = (wins / (wins+losses))) %>%
replace_na(data, 0) %>%
filter(team == 'POR', season == 2019) %>%
select(date, team1, team2, wins, losses, win_pct) %>% tail()
#win losses live
favorite_win_prob %>%
mutate(win1=score1 > score2,
win2=score2 > score1,
team_win1=paste(team1, win1, sep = "_"),
team_win2=paste(team2, win2, sep = "_")) %>%
gather(one_two, team_win, team_win1, team_win2) %>%
separate(team_win, into = c("team", "win"), sep = "_", convert = TRUE) %>%
arrange(date) %>%
group_by(season, team) %>%
#add a lag to reflect the win pct at beginning of day, before games. and add '0' placeholder at first poisiton
mutate(wins = lag(cumsum(win)),
losses = lag(cumsum(!win)),
win_pct = (wins / (wins+losses))) %>%
replace_na(., replace = 0) %>%
filter(team == 'POR', season == 2019) %>%
select(date, team1, team2, wins, losses, win_pct) %>% tail()
#win losses live
favorite_win_prob %>%
mutate(win1=score1 > score2,
win2=score2 > score1,
team_win1=paste(team1, win1, sep = "_"),
team_win2=paste(team2, win2, sep = "_")) %>%
gather(one_two, team_win, team_win1, team_win2) %>%
separate(team_win, into = c("team", "win"), sep = "_", convert = TRUE) %>%
arrange(date) %>%
group_by(season, team) %>%
#add a lag to reflect the win pct at beginning of day, before games. and add '0' placeholder at first poisiton
mutate(wins = c(0, na.omit(lag(cumsum(win)))),
losses = c(0, na.omit(lag(cumsum(!win)))),
win_pct = c(0, na.omit(wins / (wins+losses)))
) %>%
filter(team == 'POR', season == 2019) %>%
select(date, team1, team2, wins, losses, win_pct) %>% tail()
wl_live <- favorite_win_prob %>%
mutate(win1=score1 > score2,
win2=score2 > score1,
team_win1=paste(team1, win1, sep = "_"),
team_win2=paste(team2, win2, sep = "_")) %>%
gather(one_two, team_win, team_win1, team_win2) %>%
separate(team_win, into = c("team", "win"), sep = "_", convert = TRUE) %>%
arrange(date) %>%
group_by(season, team) %>%
#add a lag to reflect the win pct at beginning of day, before games. and add '0' placeholder at first poisiton
mutate(wins = lag(cumsum(win)),
losses = lag(cumsum(!win)),
win_pct = (wins / (wins+losses))
) %>%
filter(team == 'POR', season == 2019) %>%
select(date, team1, team2, wins, losses, win_pct) %>% tail()
wl_live <- favorite_win_prob %>%
mutate(win1=score1 > score2,
win2=score2 > score1,
team_win1=paste(team1, win1, sep = "_"),
team_win2=paste(team2, win2, sep = "_")) %>%
gather(one_two, team_win, team_win1, team_win2) %>%
separate(team_win, into = c("team", "win"), sep = "_", convert = TRUE) %>%
arrange(date) %>%
group_by(season, team) %>%
#add a lag to reflect the win pct at beginning of day, before games. and add '0' placeholder at first poisiton
mutate(wins = lag(cumsum(win)),
losses = lag(cumsum(!win)),
win_pct = (wins / (wins+losses))
) %>%
filter(team == 'POR', season == 2019) %>%
select(date, team1, team2, wins, losses, win_pct)
View(wl_live)
wl_live <- favorite_win_prob %>%
mutate(win1=score1 > score2,
win2=score2 > score1,
team_win1=paste(team1, win1, sep = "_"),
team_win2=paste(team2, win2, sep = "_")) %>%
gather(one_two, team_win, team_win1, team_win2) %>%
separate(team_win, into = c("team", "win"), sep = "_", convert = TRUE) %>%
arrange(date) %>%
group_by(season, team) %>%
#add a lag to reflect the win pct at beginning of day, before games. and add '0' placeholder at first poisiton
mutate(wins = lag(cumsum(win)),
losses = lag(cumsum(!win)),
win_pct = (wins / (wins+losses))
) %>%
filter(team == 'POR', season == 2019) %>%
select(date, team1, team2, wins, losses, win_pct) %>% mutate_all(~replace(., is.na(.), 0))
?mutate_at
wl_live <- favorite_win_prob %>%
mutate(win1=score1 > score2,
win2=score2 > score1,
team_win1=paste(team1, win1, sep = "_"),
team_win2=paste(team2, win2, sep = "_")) %>%
gather(one_two, team_win, team_win1, team_win2) %>%
separate(team_win, into = c("team", "win"), sep = "_", convert = TRUE) %>%
arrange(date) %>%
group_by(season, team) %>%
#add a lag to reflect the win pct at beginning of day, before games. and add '0' placeholder at first poisiton
mutate(wins = lag(cumsum(win)),
losses = lag(cumsum(!win)),
win_pct = (wins / (wins+losses))
) %>%
filter(team == 'POR', season == 2019) %>%
select(date, team1, team2, wins, losses, win_pct) %>% mutate_at(., -wins, -losses, -win_pct, ~replace(., is.na(.), 0))
select(date, team1, team2, wins, losses, win_pct) %>% mutate_at(., c("wins", "losses", "win_pct", ~replace(., is.na(.), 0))
wl_live <- favorite_win_prob %>%
mutate(win1=score1 > score2,
win2=score2 > score1,
team_win1=paste(team1, win1, sep = "_"),
team_win2=paste(team2, win2, sep = "_")) %>%
gather(one_two, team_win, team_win1, team_win2) %>%
separate(team_win, into = c("team", "win"), sep = "_", convert = TRUE) %>%
arrange(date) %>%
group_by(season, team) %>%
#add a lag to reflect the win pct at beginning of day, before games. and add '0' placeholder at first poisiton
mutate(wins = lag(cumsum(win)),
losses = lag(cumsum(!win)),
win_pct = (wins / (wins+losses))
) %>%
filter(team == 'POR', season == 2019) %>%
select(date, team1, team2, wins, losses, win_pct) %>% mutate_at(., c("wins", "losses", "win_pct", ~replace(., is.na(.), 0)))
wl_live <- favorite_win_prob %>%
mutate(win1=score1 > score2,
win2=score2 > score1,
team_win1=paste(team1, win1, sep = "_"),
team_win2=paste(team2, win2, sep = "_")) %>%
gather(one_two, team_win, team_win1, team_win2) %>%
separate(team_win, into = c("team", "win"), sep = "_", convert = TRUE) %>%
arrange(date) %>%
group_by(season, team) %>%
filter(team == 'POR', season == 2019) %>%
select(date, team1, team2, wins, losses, win_pct) %>%
#add a lag to reflect the win pct at beginning of day, before games. and add '0' placeholder at first poisiton
mutate(wins = lag(cumsum(win)),
losses = lag(cumsum(!win)),
win_pct = (wins / (wins+losses))
)
wl_live <- favorite_win_prob %>%
mutate(win1=score1 > score2,
win2=score2 > score1,
team_win1=paste(team1, win1, sep = "_"),
team_win2=paste(team2, win2, sep = "_")) %>%
gather(one_two, team_win, team_win1, team_win2) %>%
separate(team_win, into = c("team", "win"), sep = "_", convert = TRUE) %>%
arrange(date) %>%
group_by(season, team) %>%
filter(team == 'POR', season == 2019) %>%
#add a lag to reflect the win pct at beginning of day, before games. and add '0' placeholder at first poisiton
mutate(wins = lag(cumsum(win)),
losses = lag(cumsum(!win)),
win_pct = (wins / (wins+losses))
) %>%
select(date, team1, team2, wins, losses, win_pct)
View(wl_live)
wl_live <- favorite_win_prob %>%
mutate(win1=score1 > score2,
win2=score2 > score1,
team_win1=paste(team1, win1, sep = "_"),
team_win2=paste(team2, win2, sep = "_")) %>%
gather(one_two, team_win, team_win1, team_win2) %>%
separate(team_win, into = c("team", "win"), sep = "_", convert = TRUE) %>%
arrange(date) %>%
group_by(season, team) %>%
filter(team == 'POR', season == 2019) %>%
#add a lag to reflect the win pct at beginning of day, before games. and add '0' placeholder at first poisiton
mutate(wins = c(0, na.omit(lag(cumsum(win)))),
losses = c(0, na.omit(lag(cumsum(!win)))),
win_pct = c(0, na.omit(wins / (wins+losses)))
) %>%
select(date, team1, team2, wins, losses, win_pct)
View(wl_live)
